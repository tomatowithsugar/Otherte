<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전시대 봉사 시간표 자동 배정 프로그램</title>
</head>
<body>
    <h1>전시대 봉사 시간표 자동 배정 프로그램</h1>
    <form id="schedulerForm">
        <label for="participants">참여자 (쉼표로 구분):</label><br>
        <input type="text" id="participants" name="participants" size="50" placeholder="예: A, B, C, D, E, F"><br>
        <label for="stands">전시대 개수:</label><br>
        <input type="number" id="stands" name="stands" min="1"><br>
        <label for="startTime">시작 시간:</label><br>
        <input type="time" id="startTime" name="startTime"><br>
        <label for="endTime">마치는 시간:</label><br>
        <input type="time" id="endTime" name="endTime"><br>
        <label for="shiftDuration">교대 시간 (분):</label><br>
        <input type="number" id="shiftDuration" name="shiftDuration" min="1" placeholder="예: 20"><br>
        <button type="button" onclick="generateSchedule()">시간표 생성</button>
    </form>
    <div id="schedule"></div>

    <script>
    function generateSchedule() {
        // 참여자 입력 처리
        const participants = document.getElementById("participants").value.split(",").map(name => name.trim());
        if (participants.length % 2 !== 0) {
            alert("참여자 수는 짝수여야 합니다.");
            return;
        }

        // 전시대 수, 시간, 교대 시간 가져오기
        const S = parseInt(document.getElementById("stands").value);
        const startTime = document.getElementById("startTime").value;
        const endTime = document.getElementById("endTime").value;
        const shiftDuration = parseInt(document.getElementById("shiftDuration").value);

        // 시간을 분 단위로 변환
        const startMinutes = timeToMinutes(startTime);
        const endMinutes = timeToMinutes(endTime);
        if (startMinutes >= endMinutes) {
            alert("시작 시간이 마치는 시간보다 늦을 수 없습니다.");
            return;
        }
        const totalMinutes = endMinutes - startMinutes;
        if (totalMinutes % shiftDuration !== 0) {
            alert("총 시간이 교대 시간의 배수가 아닙니다.");
            return;
        }
        const T = totalMinutes / shiftDuration;

        // 참여자 짝짓기
        const pairs = [];
        for (let i = 0; i < participants.length; i += 2) {
            pairs.push([participants[i], participants[i + 1]]);
        }
        const P = pairs.length;
        if (P < S) {
            alert("전시대 수보다 쌍이 적습니다.");
            return;
        }

        // 시간 슬롯 생성
        const timeSlots = [];
        for (let t = 0; t < T; t++) {
            const slotStart = startMinutes + t * shiftDuration;
            const slotEnd = slotStart + shiftDuration;
            timeSlots.push({
                start: minutesToTime(slotStart),
                end: minutesToTime(slotEnd)
            });
        }

        // 시간표 생성
        let scheduleHtml = '<table border="1"><thead><tr><th>시간대</th>';
        for (let s = 0; s < S; s++) {
            scheduleHtml += `<th>전시대 ${s + 1}</th>`;
        }
        scheduleHtml += '</tr></thead><tbody>';
        for (let t = 0; t < T; t++) {
            scheduleHtml += `<tr><td>${timeSlots[t].start} - ${timeSlots[t].end}</td>`;
            for (let s = 0; s < S; s++) {
                const pairIndex = (t + s) % P;
                const pair = pairs[pairIndex].join("-");
                scheduleHtml += `<td>${pair}</td>`;
            }
            scheduleHtml += '</tr>';
        }
        scheduleHtml += '</tbody></table>';
        document.getElementById("schedule").innerHTML = scheduleHtml;
    }

    // 시간 문자열을 분 단위로 변환
    function timeToMinutes(timeStr) {
        const [hours, minutes] = timeStr.split(":").map(Number);
        return hours * 60 + minutes;
    }

    // 분 단위를 시간 문자열로 변환
    function minutesToTime(minutes) {
        const hours = Math.floor(minutes / 60);
        const mins = minutes % 60;
        return `${hours.toString().padStart(2, '0')}:${mins.toString().padStart(2, '0')}`;
    }
    </script>
</body>
</html>